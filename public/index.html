<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exam Notes Hub</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen p-4">
    <div class="max-w-5xl mx-auto">
        <h1 class="text-3xl font-bold text-center text-indigo-700 my-8">ðŸ“š Group Exam Notes</h1>

        <div class="bg-white p-6 rounded-lg shadow-md mb-8">
            <form action="/api/upload" method="POST" enctype="multipart/form-data" class="grid grid-cols-1 md:grid-cols-4 gap-4">
                <div class="md:col-span-2">
                    <label class="block text-sm font-medium text-gray-700 mb-1">Select File</label>
                    <input type="file" name="note" required class="w-full border p-2 rounded">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Subject</label>
                    <input type="text" name="subject" placeholder="e.g. Math" required class="w-full border p-2 rounded">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Semester</label>
                    <select name="semester" class="w-full border p-2 rounded">
                        <option>Sem 1</option><option>Sem 2</option><option>Sem 3</option><option>Other</option>
                    </select>
                </div>
                <button type="submit" class="md:col-span-4 bg-indigo-600 text-white py-3 rounded font-bold hover:bg-indigo-700">Upload Note</button>
            </form>
        </div>

        <div class="bg-white rounded-lg shadow-md overflow-hidden">
            <table class="w-full text-left border-collapse">
                <thead class="bg-indigo-50">
                    <tr>
                        <th class="p-4 text-indigo-900">Note Name</th>
                        <th class="p-4 text-indigo-900">Category</th>
                        <th class="p-4 text-indigo-900 text-right">Actions</th>
                    </tr>
                </thead>
                <tbody id="fileList" class="divide-y divide-gray-100"></tbody>
            </table>
        </div>
    </div>

    <script>
       async function loadFiles() {
    const res = await fetch('/api/files');
    const files = await res.json();
    const container = document.getElementById('fileList');
    
    container.innerHTML = files.map(f => `
        <tr class="hover:bg-gray-50 border-t">
            <td class="p-4 font-medium">${f.originalName}</td>
            <td class="p-4 text-right">
                <a href="${f.serverName}" target="_blank" class="text-blue-600 font-bold hover:underline">View / Download</a>
            </td>
        </tr>
    `).join('');
}
loadFiles();
    </script>
</body>
</html>
